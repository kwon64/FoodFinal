<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="boardDAO">

<!-- 게시판 글 숫자 -->
<select id="countBoard" parameterType="board" resultType="int">
		SELECT COUNT(*) FROM board WHERE boardType=#{boardType}
</select>

<!-- 글 삭제 -->
<delete id="deleteBoard" parameterType="board">
		Delete From board WHERE boardType=#{boardType} AND b_no=#{b_no}
</delete>

<select id="selectBoard" parameterType="hashmap" resultType="board">
	SELECT * 
		FROM (
			SELECT ROWNUM RN, A.* 
				FROM (
						select * from board
						<where>
							boardType=#{boardType}
							<if test='searchType!=null &amp;&amp; keyword!=null'>AND ${searchType} like '%'||#{keyword}||'%'</if>
						</where>
						ORDER BY ROWNUM DESC 
						) A
				)
	WHERE RN BETWEEN #{start} AND #{end}
</select>

<insert id="insertBoard" parameterType="board">
		Insert Into board values(#{boardType},#{b_no,title},#{userId},#{b_content},#{b_date},#{viewCount},#{f_addr1},#{f_addr2},#{f_membercnt}
		#{f_date},#{f_port},#{f_joincnt},#{d_suspect},#{r_date},#{r_visit_date},#{r_ppl_cnt},#{r_menu},#{v_star},#{v_fileName},#{v_fileSize})

		
		
</insert>

<update id="updateBoard" parameterType="board">
		Update board set boardType=#{boardType},b_no=#{b_no},title=#{title},userId=#{userId},b_content=#{b_content},b_date=#{b_date},
		viewCount=#{viewCount},f_addr1=#{f_addr1},f_addr2=#{f_addr2},f_membercnt=#{f_membercnt},f_date=#{f_date},f_port=#{f_port},f_joincnt=#{f_joincnt},
		d_suspect=#{d_suspect},r_date=#{r_date},r_visit_date=#{r_visit_date},r_ppl_cnt=#{r_ppl_cnt},r_menu=#{r_menu},v_star=#{v_star},v_fileName=#{v_fileName},v_fileSize=#{v_fileSize}
		

</update>


</mapper>